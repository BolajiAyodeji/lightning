<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.30.9">
    <meta name="project" content="Lightning v0.10.0-pre4">

    <title>Lightning.WebhookAuthMethods â€” Lightning v0.10.0-pre4</title>
    <link rel="stylesheet" href="dist/html-elixir-XFYN5IVA.css" />


    <script src="dist/handlebars.runtime-NWIB6V2M.js"></script>
    <script src="dist/handlebars.templates-EPF2X7PV.js"></script>
    <script src="dist/sidebar_items-6FA2DA63.js"></script>

      <script src="docs_config.js"></script>

    <script async src="dist/html-J2ASZTQE.js"></script>


  </head>
  <body data-type="modules" class="page-module">
    <script>

      try {
        var settings = JSON.parse(localStorage.getItem('ex_doc:settings') || '{}');

        if (settings.theme === 'dark' ||
           ((settings.theme === 'system' || settings.theme == null) &&
             window.matchMedia('(prefers-color-scheme: dark)').matches)
           ) {
          document.body.classList.add('dark')
        }
      } catch (error) { }
    </script>

<div class="main">

<button class="sidebar-button sidebar-toggle" aria-label="toggle sidebar" aria-controls="sidebar">
  <i class="ri-menu-line ri-lg" title="Collapse/expand sidebar"></i>
</button>

<nav id="sidebar" class="sidebar">
  <form class="sidebar-search" action="search.html">
    <label class="search-label">
      <span class="sr-only">Search documentation of Lightning</span>
      <input name="q" type="text" class="search-input" placeholder="Search..." autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
    </label>
    <button type="submit" class="search-button" aria-label="Submit Search">
      <i class="ri-search-2-line" aria-hidden="true" title="Submit search"></i>
    </button>
    <button type="button" tabindex="-1" class="search-close-button" aria-hidden="true">
      <i class="ri-close-line ri-lg" title="Cancel search"></i>
    </button>
  </form>

  <div class="autocomplete">
    <div class="autocomplete-results">
    </div>
  </div>

  <div class="sidebar-header">

      <a href="https://openfn.github.io/Lightning">
        <img src="assets/logo.png" alt="Lightning" class="sidebar-projectImage">
      </a>

    <div class="sidebar-projectDetails">
      <a href="https://openfn.github.io/Lightning" class="sidebar-projectName" translate="no">
Lightning
      </a>
      <div class="sidebar-projectVersion" translate="no">
        v0.10.0-pre4
      </div>
    </div>
    <ul id="sidebar-listNav" class="sidebar-listNav" role="tablist">
      <li>
        <button id="extras-list-tab-button" role="tab" data-type="extras" aria-controls="extras-tab-panel" aria-selected="true" tabindex="0">
Pages
        </button>
      </li>

        <li>
          <button id="modules-list-tab-button" role="tab" data-type="modules" aria-controls="modules-tab-panel" aria-selected="false" tabindex="-1">
            Modules
          </button>
        </li>


        <li>
          <button id="tasks-list-tab-button" role="tab" data-type="tasks" aria-controls="tasks-tab-panel" aria-selected="false" tabindex="-1">
            <span translate="no">Mix</span> Tasks
          </button>
        </li>

    </ul>
  </div>

  <div id="extras-tab-panel" class="sidebar-tabpanel" role="tabpanel" aria-labelledby="extras-list-tab-button">
    <ul id="extras-full-list" class="full-list"></ul>
  </div>

    <div id="modules-tab-panel" class="sidebar-tabpanel" role="tabpanel" aria-labelledby="modules-list-tab-button" hidden>
      <ul id="modules-full-list" class="full-list"></ul>
    </div>


    <div id="tasks-tab-panel" class="sidebar-tabpanel" role="tabpanel" aria-labelledby="tasks-list-tab-button" hidden>
      <ul id="tasks-full-list" class="full-list"></ul>
    </div>

</nav>

<main class="content">
  <output role="status" id="toast"></output>
  <div class="content-outer">
    <div id="content" class="content-inner">

<h1>
<button class="icon-action display-settings">
  <i class="ri-settings-3-line"></i>
  <span class="sr-only">Settings</span>
</button>


    <a href="https://github.com/OpenFn/lightning/blob/main/lib/lightning/webhook_auth_methods.ex#L1" title="View Source" class="icon-action" rel="help">
      <i class="ri-code-s-slash-line" aria-hidden="true"></i>
      <span class="sr-only">View Source</span>
    </a>

  <span translate="no">Lightning.WebhookAuthMethods</span> 
  <small class="app-vsn" translate="no">(Lightning v0.10.0-pre4)</small>

</h1>


  <section id="moduledoc">
<p>The <a href="Lightning.WebhookAuthMethods.html#content"><code class="inline">Lightning.WebhookAuthMethods</code></a> context provides a suite of functionalities to handle and interact with Webhook Authentication Methods within the application.</p><h2 id="module-overview" class="section-heading">
  <a href="#module-overview" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Overview</span>
</h2>
<p>This context is designed to encapsulate all the logic related to Webhook Authentication Methods, including their creation, updates, retrievals, and deletions. It serves as an API for other parts of the system to interact with Webhook Authentication Methods, ensuring that the internal implementation details are hidden, and only the necessary functionalities are exposed.</p><h2 id="module-functionalities" class="section-heading">
  <a href="#module-functionalities" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Functionalities</span>
</h2>
<ul><li><code class="inline">create_auth_method/1</code>: Allows for the creation of a new Webhook Authentication Method with given attributes.</li><li><code class="inline">update_auth_method/2</code>: Facilitates the updating of an existing Webhook Authentication Method.</li><li><a href="#delete_auth_method/1"><code class="inline">delete_auth_method/1</code></a>: Allows for the deletion of a given Webhook Auth Method.</li><li><a href="#list_for_project/1"><code class="inline">list_for_project/1</code></a>: Provides a list of all Webhook Authentication Methods for a given project.</li><li><a href="#list_for_trigger/1"><code class="inline">list_for_trigger/1</code></a>: Provides a list of all Webhook Authentication Methods for a given trigger.</li><li><a href="#find_by_api_key/2"><code class="inline">find_by_api_key/2</code></a>: Retrieves a Webhook Authentication Method by API key and project_id.</li><li><a href="#find_by_username_and_password/3"><code class="inline">find_by_username_and_password/3</code></a>: Obtains a Webhook Authentication Method by username, password, and project_id if the password is valid.</li><li><code class="inline">find_by_id!/2</code>: Fetches a Webhook Authentication Method by id and project_id, raises if it does not exist.</li></ul><h2 id="module-examples" class="section-heading">
  <a href="#module-examples" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Examples</span>
</h2>
<p>The examples in each function provide detailed use cases and expected outcomes, aiding developers in understanding how to utilize the functionalities provided by this context.</p><h2 id="module-usage" class="section-heading">
  <a href="#module-usage" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Usage</span>
</h2>
<p>This module is intended to be used by other modules, contexts, or controllers that need to perform operations related to Webhook Authentication Methods, serving as a clear and consistent interface for these operations.</p>
  </section>


  <section id="summary" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#summary">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Summary</span>
    </h1>
<div class="summary-functions summary">
  <h2>
    <a href="#functions">Functions</a>
  </h2>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#create_auth_method/2" translate="no">create_auth_method(attrs, list)</a>

      </div>

        <div class="summary-synopsis"><p>Creates a <code class="inline">WebhookAuthMethod</code>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#create_auth_method/3" translate="no">create_auth_method(trigger, params, list)</a>

      </div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#create_changeset/2" translate="no">create_changeset(webhook_auth_method, params)</a>

      </div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#delete_auth_method/1" translate="no">delete_auth_method(auth_method)</a>

      </div>

        <div class="summary-synopsis"><p>Deletes a Webhook Auth Method.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#find_by_api_key/2" translate="no">find_by_api_key(api_key, project)</a>

      </div>

        <div class="summary-synopsis"><p>Gets a <code class="inline">WebhookAuthMethod</code> by api_key and project_id.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#find_by_id!/1" translate="no">find_by_id!(id)</a>

      </div>

        <div class="summary-synopsis"><p>Gets a <code class="inline">WebhookAuthMethod</code> by id and project_id, raises if it does not exist.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#find_by_username_and_password/3" translate="no">find_by_username_and_password(username, password, project)</a>

      </div>

        <div class="summary-synopsis"><p>Gets a <code class="inline">WebhookAuthMethod</code> by username, password, and project_id if the password is valid.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#list_for_project/1" translate="no">list_for_project(project)</a>

      </div>

        <div class="summary-synopsis"><p>Lists all <code class="inline">WebhookAuthMethod</code>s for a given project.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#list_for_trigger/1" translate="no">list_for_trigger(trigger)</a>

      </div>

        <div class="summary-synopsis"><p>Retrieves a list of webhook_auth_methods associated with the given trigger.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#perform/1" translate="no">perform(job)</a>

      </div>

        <div class="summary-synopsis"><p>When called with %{&quot;type&quot; =&gt; &quot;purge_deleted&quot;},
finds webhook_auth_methods that are ready for permanent deletion,
disassociates them from the triggers, and then deletes the webhook_auth_methods.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#schedule_for_deletion/1" translate="no">schedule_for_deletion(webhook_auth_method)</a>

      </div>

        <div class="summary-synopsis"><p>Schedules a given webhook auth method for deletion.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#update_auth_method/3" translate="no">update_auth_method(webhook_auth_method, attrs, list)</a>

      </div>

        <div class="summary-synopsis"><p>Updates a <code class="inline">WebhookAuthMethod</code>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#update_trigger_auth_methods/3" translate="no">update_trigger_auth_methods(trigger, auth_methods, list)</a>

      </div>

    </div>

</div>

  </section>


  <section id="functions" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#functions">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Functions</span>
    </h1>
    <div class="functions-list">
<section class="detail" id="create_auth_method/2">

  <div class="detail-header">
    <a href="#create_auth_method/2" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">create_auth_method(attrs, list)</h1>

      <a href="https://github.com/OpenFn/lightning/blob/main/lib/lightning/webhook_auth_methods.ex#L102" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

<p>Creates a <code class="inline">WebhookAuthMethod</code>.</p><h2 id="create_auth_method/2-examples" class="section-heading">
  <a href="#create_auth_method/2-examples" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Examples</span>
</h2>
<pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="n">create_auth_method</span><span class="p" data-group-id="5350963660-1">(</span><span class="p" data-group-id="5350963660-2">%{</span><span class="n">valid</span><span class="w"> </span><span class="n">attributes</span><span class="p" data-group-id="5350963660-2">}</span><span class="p" data-group-id="5350963660-1">)</span><span class="w">
</span><span class="p" data-group-id="5350963660-3">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="5350963660-4">%</span><span class="nc" data-group-id="5350963660-4">WebhookAuthMethod</span><span class="p" data-group-id="5350963660-4">{</span><span class="p" data-group-id="5350963660-4">}</span><span class="p" data-group-id="5350963660-3">}</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="n">create_auth_method</span><span class="p" data-group-id="5350963660-5">(</span><span class="p" data-group-id="5350963660-6">%{</span><span class="n">invalid</span><span class="w"> </span><span class="n">attributes</span><span class="p" data-group-id="5350963660-6">}</span><span class="p" data-group-id="5350963660-5">)</span><span class="w">
</span><span class="p" data-group-id="5350963660-7">{</span><span class="ss">:error</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="5350963660-8">%</span><span class="nc" data-group-id="5350963660-8">Ecto.Changeset</span><span class="p" data-group-id="5350963660-8">{</span><span class="p" data-group-id="5350963660-8">}</span><span class="p" data-group-id="5350963660-7">}</span></code></pre>
  </section>
</section>
<section class="detail" id="create_auth_method/3">

  <div class="detail-header">
    <a href="#create_auth_method/3" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">create_auth_method(trigger, params, list)</h1>

      <a href="https://github.com/OpenFn/lightning/blob/main/lib/lightning/webhook_auth_methods.ex#L122" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> create_auth_method(<a href="Lightning.Workflows.Trigger.html#t:t/0">Lightning.Workflows.Trigger.t</a>(), <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">map</a>(), [
  {:actor, <a href="Lightning.Accounts.User.html#t:t/0">Lightning.Accounts.User.t</a>()}
]) ::
  {:ok, <a href="Lightning.Workflows.WebhookAuthMethod.html#t:t/0">Lightning.Workflows.WebhookAuthMethod.t</a>()}
  | {:error, <a href="https://hexdocs.pm/ecto/3.10.3/Ecto.Changeset.html#t:t/0">Ecto.Changeset.t</a>()}</pre>

      </div>


  </section>
</section>
<section class="detail" id="create_changeset/2">

  <div class="detail-header">
    <a href="#create_changeset/2" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">create_changeset(webhook_auth_method, params)</h1>

      <a href="https://github.com/OpenFn/lightning/blob/main/lib/lightning/webhook_auth_methods.ex#L418" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">


  </section>
</section>
<section class="detail" id="delete_auth_method/1">

  <div class="detail-header">
    <a href="#delete_auth_method/1" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">delete_auth_method(auth_method)</h1>

      <a href="https://github.com/OpenFn/lightning/blob/main/lib/lightning/webhook_auth_methods.ex#L269" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

<p>Deletes a Webhook Auth Method.</p><h2 id="delete_auth_method/1-examples" class="section-heading">
  <a href="#delete_auth_method/1-examples" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Examples</span>
</h2>
<pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="n">delete_auth_method</span><span class="p" data-group-id="7209250940-1">(</span><span class="p" data-group-id="7209250940-2">%</span><span class="nc" data-group-id="7209250940-2">WebhookAuthMethod</span><span class="p" data-group-id="7209250940-2">{</span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;some_id&quot;</span><span class="p" data-group-id="7209250940-2">}</span><span class="p" data-group-id="7209250940-1">)</span><span class="w">
</span><span class="p" data-group-id="7209250940-3">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="7209250940-4">%</span><span class="nc" data-group-id="7209250940-4">WebhookAuthMethod</span><span class="p" data-group-id="7209250940-4">{</span><span class="p" data-group-id="7209250940-4">}</span><span class="p" data-group-id="7209250940-3">}</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="n">delete_auth_method</span><span class="p" data-group-id="7209250940-5">(</span><span class="p" data-group-id="7209250940-6">%</span><span class="nc" data-group-id="7209250940-6">WebhookAuthMethod</span><span class="p" data-group-id="7209250940-6">{</span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;non_existing_id&quot;</span><span class="p" data-group-id="7209250940-6">}</span><span class="p" data-group-id="7209250940-5">)</span><span class="w">
</span><span class="p" data-group-id="7209250940-7">{</span><span class="ss">:error</span><span class="p">,</span><span class="w"> </span><span class="ss">:conflict</span><span class="p" data-group-id="7209250940-7">}</span></code></pre>
  </section>
</section>
<section class="detail" id="find_by_api_key/2">

  <div class="detail-header">
    <a href="#find_by_api_key/2" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">find_by_api_key(api_key, project)</h1>

      <a href="https://github.com/OpenFn/lightning/blob/main/lib/lightning/webhook_auth_methods.ex#L329" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

<p>Gets a <code class="inline">WebhookAuthMethod</code> by api_key and project_id.</p><h2 id="find_by_api_key/2-examples" class="section-heading">
  <a href="#find_by_api_key/2-examples" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Examples</span>
</h2>
<pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="n">find_by_api_key</span><span class="p" data-group-id="1164528280-1">(</span><span class="s">&quot;existing_api_key&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="1164528280-2">%</span><span class="nc" data-group-id="1164528280-2">Project</span><span class="p" data-group-id="1164528280-2">{</span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;existing_project_id&quot;</span><span class="p" data-group-id="1164528280-2">}</span><span class="p" data-group-id="1164528280-1">)</span><span class="w">
</span><span class="p" data-group-id="1164528280-3">%</span><span class="nc" data-group-id="1164528280-3">WebhookAuthMethod</span><span class="p" data-group-id="1164528280-3">{</span><span class="p" data-group-id="1164528280-3">}</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="n">find_by_id_by_username</span><span class="p" data-group-id="1164528280-4">(</span><span class="s">&quot;non_existing_api_key&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="1164528280-5">%</span><span class="nc" data-group-id="1164528280-5">Project</span><span class="p" data-group-id="1164528280-5">{</span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;existing_project_id&quot;</span><span class="p" data-group-id="1164528280-5">}</span><span class="p" data-group-id="1164528280-4">)</span><span class="w">
</span><span class="no">nil</span></code></pre>
  </section>
</section>
<section class="detail" id="find_by_id!/1">

  <div class="detail-header">
    <a href="#find_by_id!/1" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">find_by_id!(id)</h1>

      <a href="https://github.com/OpenFn/lightning/blob/main/lib/lightning/webhook_auth_methods.ex#L370" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

<p>Gets a <code class="inline">WebhookAuthMethod</code> by id and project_id, raises if it does not exist.</p><h2 id="find_by_id!/1-examples" class="section-heading">
  <a href="#find_by_id!/1-examples" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Examples</span>
</h2>
<pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="n">find_by_id!</span><span class="p" data-group-id="4856445536-1">(</span><span class="s">&quot;existing_id&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="4856445536-2">%</span><span class="nc" data-group-id="4856445536-2">Project</span><span class="p" data-group-id="4856445536-2">{</span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;existing_project_id&quot;</span><span class="p" data-group-id="4856445536-2">}</span><span class="p" data-group-id="4856445536-1">)</span><span class="w">
</span><span class="p" data-group-id="4856445536-3">%</span><span class="nc" data-group-id="4856445536-3">WebhookAuthMethod</span><span class="p" data-group-id="4856445536-3">{</span><span class="p" data-group-id="4856445536-3">}</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="n">find_by_id!</span><span class="p" data-group-id="4856445536-4">(</span><span class="s">&quot;non_existing_id&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="4856445536-5">%</span><span class="nc" data-group-id="4856445536-5">Project</span><span class="p" data-group-id="4856445536-5">{</span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;existing_project_id&quot;</span><span class="p" data-group-id="4856445536-5">}</span><span class="p" data-group-id="4856445536-4">)</span><span class="w">
</span><span class="gt">** (Ecto.NoResultsError)</span></code></pre>
  </section>
</section>
<section class="detail" id="find_by_username_and_password/3">

  <div class="detail-header">
    <a href="#find_by_username_and_password/3" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">find_by_username_and_password(username, password, project)</h1>

      <a href="https://github.com/OpenFn/lightning/blob/main/lib/lightning/webhook_auth_methods.ex#L349" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

<p>Gets a <code class="inline">WebhookAuthMethod</code> by username, password, and project_id if the password is valid.</p><h2 id="find_by_username_and_password/3-examples" class="section-heading">
  <a href="#find_by_username_and_password/3-examples" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Examples</span>
</h2>
<pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="n">find_by_username_and_password</span><span class="p" data-group-id="8353238994-1">(</span><span class="s">&quot;existing_username&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;valid_password&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="8353238994-2">%</span><span class="nc" data-group-id="8353238994-2">Project</span><span class="p" data-group-id="8353238994-2">{</span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;existing_project_id&quot;</span><span class="p" data-group-id="8353238994-2">}</span><span class="p" data-group-id="8353238994-1">)</span><span class="w">
</span><span class="p" data-group-id="8353238994-3">%</span><span class="nc" data-group-id="8353238994-3">WebhookAuthMethod</span><span class="p" data-group-id="8353238994-3">{</span><span class="p" data-group-id="8353238994-3">}</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="n">find_by_username_and_password</span><span class="p" data-group-id="8353238994-4">(</span><span class="s">&quot;existing_username&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;invalid_password&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="8353238994-5">%</span><span class="nc" data-group-id="8353238994-5">Project</span><span class="p" data-group-id="8353238994-5">{</span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;existing_project_id&quot;</span><span class="p" data-group-id="8353238994-5">}</span><span class="p" data-group-id="8353238994-4">)</span><span class="w">
</span><span class="no">nil</span></code></pre>
  </section>
</section>
<section class="detail" id="list_for_project/1">

  <div class="detail-header">
    <a href="#list_for_project/1" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">list_for_project(project)</h1>

      <a href="https://github.com/OpenFn/lightning/blob/main/lib/lightning/webhook_auth_methods.ex#L285" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

<p>Lists all <code class="inline">WebhookAuthMethod</code>s for a given project.</p><h2 id="list_for_project/1-examples" class="section-heading">
  <a href="#list_for_project/1-examples" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Examples</span>
</h2>
<pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="n">list_for_project</span><span class="p" data-group-id="0844608979-1">(</span><span class="p" data-group-id="0844608979-2">%</span><span class="nc" data-group-id="0844608979-2">Project</span><span class="p" data-group-id="0844608979-2">{</span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;existing_project_id&quot;</span><span class="p" data-group-id="0844608979-2">}</span><span class="p" data-group-id="0844608979-1">)</span><span class="w">
</span><span class="p" data-group-id="0844608979-3">[</span><span class="p" data-group-id="0844608979-4">%</span><span class="nc" data-group-id="0844608979-4">WebhookAuthMethod</span><span class="p" data-group-id="0844608979-4">{</span><span class="p" data-group-id="0844608979-4">}</span><span class="p">,</span><span class="w"> </span><span class="n">...</span><span class="p" data-group-id="0844608979-3">]</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="n">list_for_project</span><span class="p" data-group-id="0844608979-5">(</span><span class="p" data-group-id="0844608979-6">%</span><span class="nc" data-group-id="0844608979-6">Project</span><span class="p" data-group-id="0844608979-6">{</span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;non_existing_project_id&quot;</span><span class="p" data-group-id="0844608979-6">}</span><span class="p" data-group-id="0844608979-5">)</span><span class="w">
</span><span class="p" data-group-id="0844608979-7">[</span><span class="p" data-group-id="0844608979-7">]</span></code></pre>
  </section>
</section>
<section class="detail" id="list_for_trigger/1">

  <div class="detail-header">
    <a href="#list_for_trigger/1" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">list_for_trigger(trigger)</h1>

      <a href="https://github.com/OpenFn/lightning/blob/main/lib/lightning/webhook_auth_methods.ex#L310" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

<p>Retrieves a list of webhook_auth_methods associated with the given trigger.</p><h2 id="list_for_trigger/1-parameters" class="section-heading">
  <a href="#list_for_trigger/1-parameters" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Parameters</span>
</h2>
<ul><li><code class="inline">trigger</code>: The Trigger struct for which associated webhook_auth_methods are to be retrieved. If <code class="inline">nil</code>, the function will return <code class="inline">nil</code>.</li></ul><h2 id="list_for_trigger/1-returns" class="section-heading">
  <a href="#list_for_trigger/1-returns" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Returns</span>
</h2>
<ul><li>Returns a list of %WebhookAuthMethod{} associated with the given trigger.</li></ul><h2 id="list_for_trigger/1-examples" class="section-heading">
  <a href="#list_for_trigger/1-examples" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Examples</span>
</h2>
<pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="nc">Lightning.Workflows</span><span class="o">.</span><span class="n">list_for_trigger</span><span class="p" data-group-id="4782963885-1">(</span><span class="n">trigger</span><span class="p" data-group-id="4782963885-1">)</span><span class="w">
</span><span class="p" data-group-id="4782963885-2">[</span><span class="p" data-group-id="4782963885-3">%</span><span class="nc" data-group-id="4782963885-3">WebhookAuthMethod</span><span class="p" data-group-id="4782963885-3">{</span><span class="p" data-group-id="4782963885-3">}</span><span class="p">,</span><span class="w"> </span><span class="n">...</span><span class="p" data-group-id="4782963885-2">]</span></code></pre>
  </section>
</section>
<section class="detail" id="perform/1">

  <div class="detail-header">
    <a href="#perform/1" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">perform(job)</h1>

      <a href="https://github.com/OpenFn/lightning/blob/main/lib/lightning/webhook_auth_methods.ex#L47" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

<p>When called with %{&quot;type&quot; =&gt; &quot;purge_deleted&quot;},
finds webhook_auth_methods that are ready for permanent deletion,
disassociates them from the triggers, and then deletes the webhook_auth_methods.</p>
  </section>
</section>
<section class="detail" id="schedule_for_deletion/1">

  <div class="detail-header">
    <a href="#schedule_for_deletion/1" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">schedule_for_deletion(webhook_auth_method)</h1>

      <a href="https://github.com/OpenFn/lightning/blob/main/lib/lightning/webhook_auth_methods.ex#L404" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

<p>Schedules a given webhook auth method for deletion.</p><p>The deletion date is determined based on the <code class="inline">:purge_deleted_after_days</code> configuration
in the application environment. If this configuration is absent, the webhook auth method is scheduled
for immediate deletion.</p><p>The function will also perform necessary side effects such as:</p><ul><li>Removing associations of the webhook auth method.</li><li>Notifying the owner of the webhook auth method about the scheduled deletion.</li></ul><h2 id="schedule_for_deletion/1-parameters" class="section-heading">
  <a href="#schedule_for_deletion/1-parameters" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Parameters</span>
</h2>
<ul><li><code class="inline">webhook_auth_method</code>: A <code class="inline">WebhookAuthMethod</code> struct that is to be scheduled for deletion.</li></ul><h2 id="schedule_for_deletion/1-returns" class="section-heading">
  <a href="#schedule_for_deletion/1-returns" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Returns</span>
</h2>
<ul><li><code class="inline">{:ok, webhook_auth_method}</code>: Returns an <code class="inline">:ok</code> tuple with the updated webhook auth method struct if the
update was successful.</li><li><code class="inline">{:error, changeset}</code>: Returns an <code class="inline">:error</code> tuple with the changeset if the update failed.</li></ul><h2 id="schedule_for_deletion/1-examples" class="section-heading">
  <a href="#schedule_for_deletion/1-examples" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Examples</span>
</h2>
<pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="n">schedule_for_deletion</span><span class="p" data-group-id="5122396153-1">(</span><span class="p" data-group-id="5122396153-2">%</span><span class="nc" data-group-id="5122396153-2">WebhookAuthMethod</span><span class="p" data-group-id="5122396153-2">{</span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="n">some_id</span><span class="p" data-group-id="5122396153-2">}</span><span class="p" data-group-id="5122396153-1">)</span><span class="w">
</span><span class="p" data-group-id="5122396153-3">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="5122396153-4">%</span><span class="nc" data-group-id="5122396153-4">WebhookAuthMethod</span><span class="p" data-group-id="5122396153-4">{</span><span class="p" data-group-id="5122396153-4">}</span><span class="p" data-group-id="5122396153-3">}</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="n">schedule_for_deletion</span><span class="p" data-group-id="5122396153-5">(</span><span class="p" data-group-id="5122396153-6">%</span><span class="nc" data-group-id="5122396153-6">WebhookAuthMethod</span><span class="p" data-group-id="5122396153-6">{</span><span class="p" data-group-id="5122396153-6">}</span><span class="p" data-group-id="5122396153-5">)</span><span class="w">
</span><span class="p" data-group-id="5122396153-7">{</span><span class="ss">:error</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="5122396153-8">%</span><span class="nc" data-group-id="5122396153-8">Ecto.Changeset</span><span class="p" data-group-id="5122396153-8">{</span><span class="p" data-group-id="5122396153-8">}</span><span class="p" data-group-id="5122396153-7">}</span></code></pre>
  </section>
</section>
<section class="detail" id="update_auth_method/3">

  <div class="detail-header">
    <a href="#update_auth_method/3" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">update_auth_method(webhook_auth_method, attrs, list)</h1>

      <a href="https://github.com/OpenFn/lightning/blob/main/lib/lightning/webhook_auth_methods.ex#L162" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

<p>Updates a <code class="inline">WebhookAuthMethod</code>.</p><h2 id="update_auth_method/3-examples" class="section-heading">
  <a href="#update_auth_method/3-examples" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Examples</span>
</h2>
<pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="n">update_auth_method</span><span class="p" data-group-id="2228571063-1">(</span><span class="n">webhook_auth_method</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="2228571063-2">%{</span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="n">new_value</span><span class="p" data-group-id="2228571063-2">}</span><span class="p" data-group-id="2228571063-1">)</span><span class="w">
</span><span class="p" data-group-id="2228571063-3">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="2228571063-4">%</span><span class="nc" data-group-id="2228571063-4">WebhookAuthMethod</span><span class="p" data-group-id="2228571063-4">{</span><span class="p" data-group-id="2228571063-4">}</span><span class="p" data-group-id="2228571063-3">}</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="n">update_auth_method</span><span class="p" data-group-id="2228571063-5">(</span><span class="n">webhook_auth_method</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="2228571063-6">%{</span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="n">bad_value</span><span class="p" data-group-id="2228571063-6">}</span><span class="p" data-group-id="2228571063-5">)</span><span class="w">
</span><span class="p" data-group-id="2228571063-7">{</span><span class="ss">:error</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="2228571063-8">%</span><span class="nc" data-group-id="2228571063-8">Ecto.Changeset</span><span class="p" data-group-id="2228571063-8">{</span><span class="p" data-group-id="2228571063-8">}</span><span class="p" data-group-id="2228571063-7">}</span></code></pre>
  </section>
</section>
<section class="detail" id="update_trigger_auth_methods/3">

  <div class="detail-header">
    <a href="#update_trigger_auth_methods/3" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">update_trigger_auth_methods(trigger, auth_methods, list)</h1>

      <a href="https://github.com/OpenFn/lightning/blob/main/lib/lightning/webhook_auth_methods.ex#L197" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> update_trigger_auth_methods(
  <a href="Lightning.Workflows.Trigger.html#t:t/0">Lightning.Workflows.Trigger.t</a>(),
  [<a href="Lightning.Workflows.WebhookAuthMethod.html#t:t/0">Lightning.Workflows.WebhookAuthMethod.t</a>(), ...] | [],
  [{:actor, <a href="Lightning.Accounts.User.html#t:t/0">Lightning.Accounts.User.t</a>()}]
) :: {:ok, <a href="Lightning.Workflows.Trigger.html#t:t/0">Lightning.Workflows.Trigger.t</a>()} | {:error, <a href="https://hexdocs.pm/ecto/3.10.3/Ecto.Changeset.html#t:t/0">Ecto.Changeset.t</a>()}</pre>

      </div>


  </section>
</section>

    </div>
  </section>

      <footer class="footer">
        <p>

          <span class="line">
            <button class="a-main footer-button display-quick-switch" title="Search HexDocs packages">
              Search HexDocs
            </button>

              <a href="Lightning.epub" title="ePub version">
                Download ePub version
              </a>

          </span>
        </p>

        <p class="built-using">
          Built using
          <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener" translate="no">ExDoc</a> (v0.30.9) for the

            <a href="https://elixir-lang.org" title="Elixir" target="_blank" translate="no">Elixir programming language</a>

        </p>
      </footer>
    </div>
  </div>
</main>
</div>


  </body>
</html>
